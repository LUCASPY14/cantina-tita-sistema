<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DER por M贸dulos - CantinatitaDB</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; }
        .header p { font-size: 1.1em; opacity: 0.9; }
        .content { padding: 40px; }
        .module {
            margin-bottom: 50px;
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
        }
        .module-header {
            background: #f8f9fa;
            padding: 20px;
            border-bottom: 2px solid #ddd;
        }
        .module-header h2 { color: #1e3c72; margin-bottom: 5px; }
        .module-header p { color: #666; font-size: 0.95em; }
        .diagrams { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; }
        .diagram {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            background: #f8f9fa;
        }
        .diagram h3 { color: #2a5298; margin-bottom: 10px; font-size: 1.1em; }
        .diagram img { width: 100%; border-radius: 5px; cursor: pointer; }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            padding: 20px;
        }
        .modal-content { margin: auto; max-width: 95%; max-height: 95%; }
        .modal-content img { max-width: 100%; max-height: 90vh; border-radius: 8px; }
        .close {
            position: absolute;
            top: 20px;
            right: 40px;
            color: white;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }
        .footer { background: #f8f9fa; padding: 30px; text-align: center; color: #666; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1> DER por M贸dulos Funcionales</h1>
            <h2>Base de Datos: cantinatitadb</h2>
            <p>Generado: 14/01/2026 a las 23:48:42</p>
            <p>Total: 22 m贸dulos | 44 diagramas</p>
        </div>
        <div class="content">

            <div class="module">
                <div class="module-header">
                    <h2>01_Autenticacion_Django</h2>
                    <p>Sistema de autenticaci贸n y permisos de Django</p>
                    <p><strong>Tablas (10):</strong> auth_user, auth_group, auth_permission, auth_group_permissions, auth_user_groups, auth_user_user_permissions, django_admin_log, django_content_type, django_migrations, django_session</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="01_Autenticacion_Django_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="01_Autenticacion_Django_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>02_Clientes_Padres</h2>
                    <p>Gesti贸n de clientes y padres de familia</p>
                    <p><strong>Tablas (6):</strong> clientes, tipos_cliente, usuarios_portal, usuario_portal, usuarios_web_clientes, preferencia_notificacion</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="02_Clientes_Padres_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="02_Clientes_Padres_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>03_Hijos_Estudiantes</h2>
                    <p>Gesti贸n de hijos/estudiantes y educaci贸n</p>
                    <p><strong>Tablas (5):</strong> hijos, grados, historial_grados_hijos, restricciones_hijos, restricciones_horarias</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="03_Hijos_Estudiantes_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="03_Hijos_Estudiantes_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>04_Tarjetas_Saldo</h2>
                    <p>Tarjetas, saldo y autorizaciones</p>
                    <p><strong>Tablas (9):</strong> tarjetas, tarjetas_autorizacion, cargas_saldo, consumos_tarjeta, autorizacion_saldo_negativo, aceptacion_terminos_saldo_negativo, log_autorizaciones, notificacion_saldo, bloqueos_cuenta</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="04_Tarjetas_Saldo_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="04_Tarjetas_Saldo_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>05_Productos_Catalogo</h2>
                    <p>Cat谩logo de productos, categor铆as y alergenos</p>
                    <p><strong>Tablas (5):</strong> productos, categorias, unidades_medida, alergenos, producto_alergenos</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="05_Productos_Catalogo_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="05_Productos_Catalogo_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>06_Inventario_Stock</h2>
                    <p>Control de inventario y movimientos de stock</p>
                    <p><strong>Tablas (6):</strong> stock_unico, movimientos_stock, ajustes_inventario, detalle_ajuste, costos_historicos, historico_precios</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="06_Inventario_Stock_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="06_Inventario_Stock_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>07_Precios_Impuestos</h2>
                    <p>Gesti贸n de precios, listas e impuestos</p>
                    <p><strong>Tablas (3):</strong> listas_precios, precios_por_lista, impuestos</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="07_Precios_Impuestos_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="07_Precios_Impuestos_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>08_Ventas_POS</h2>
                    <p>Ventas en punto de venta</p>
                    <p><strong>Tablas (4):</strong> ventas, detalle_venta, medios_pago, tipos_pago</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="08_Ventas_POS_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="08_Ventas_POS_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>09_Pagos_Ventas</h2>
                    <p>Pagos relacionados con ventas</p>
                    <p><strong>Tablas (4):</strong> pagos_venta, aplicacion_pagos_ventas, transaccion_online, conciliacion_pagos</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="09_Pagos_Ventas_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="09_Pagos_Ventas_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>10_Compras_Proveedores</h2>
                    <p>Compras y gesti贸n de proveedores</p>
                    <p><strong>Tablas (5):</strong> compras, detalle_compra, proveedores, pagos_proveedores, aplicacion_pagos_compras</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="10_Compras_Proveedores_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="10_Compras_Proveedores_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>11_Notas_Credito</h2>
                    <p>Notas de cr茅dito a clientes y proveedores</p>
                    <p><strong>Tablas (4):</strong> notas_credito_cliente, detalle_nota, notas_credito_proveedor, detalle_nota_credito_proveedor</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="11_Notas_Credito_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="11_Notas_Credito_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>12_Promociones</h2>
                    <p>Sistema de promociones y descuentos</p>
                    <p><strong>Tablas (4):</strong> promociones, promociones_aplicadas, productos_promocion, categorias_promocion</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="12_Promociones_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="12_Promociones_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>13_Almuerzo_Planes</h2>
                    <p>Planes y tipos de almuerzo escolar</p>
                    <p><strong>Tablas (7):</strong> planes_almuerzo, tipos_almuerzo, suscripciones_almuerzo, registro_consumo_almuerzo, cuentas_almuerzo_mensual, pagos_cuentas_almuerzo, pagos_almuerzo_mensual</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="13_Almuerzo_Planes_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="13_Almuerzo_Planes_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>14_Empleados_RRHH</h2>
                    <p>Empleados y recursos humanos</p>
                    <p><strong>Tablas (3):</strong> empleados, tipos_rol_general, tarifas_comision</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="14_Empleados_RRHH_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="14_Empleados_RRHH_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>15_Comisiones</h2>
                    <p>Comisiones de empleados</p>
                    <p><strong>Tablas (2):</strong> detalle_comision_venta, auditoria_comisiones</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="15_Comisiones_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="15_Comisiones_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>16_Cajas_Cierres</h2>
                    <p>Cajas y cierres de caja</p>
                    <p><strong>Tablas (2):</strong> cajas, cierres_caja</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="16_Cajas_Cierres_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="16_Cajas_Cierres_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>17_Facturacion</h2>
                    <p>Facturaci贸n electr贸nica y f铆sica</p>
                    <p><strong>Tablas (6):</strong> datos_facturacion_elect, datos_facturacion_fisica, timbrados, puntos_expedicion, documentos_tributarios, datos_empresa</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="17_Facturacion_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="17_Facturacion_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>18_Seguridad_2FA</h2>
                    <p>Seguridad, autenticaci贸n 2FA y sesiones</p>
                    <p><strong>Tablas (6):</strong> autenticacion_2fa, intentos_2fa, intentos_login, sesiones_activas, renovaciones_sesion, patrones_acceso</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="18_Seguridad_2FA_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="18_Seguridad_2FA_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>19_Tokens_Verificacion</h2>
                    <p>Tokens de verificaci贸n y recuperaci贸n</p>
                    <p><strong>Tablas (3):</strong> token_verificacion, tokens_verificacion, tokens_recuperacion</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="19_Tokens_Verificacion_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="19_Tokens_Verificacion_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>20_Notificaciones</h2>
                    <p>Sistema de notificaciones</p>
                    <p><strong>Tablas (2):</strong> notificacion, solicitudes_notificacion</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="20_Notificaciones_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="20_Notificaciones_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>21_Alertas_Anomalias</h2>
                    <p>Alertas y detecci贸n de anomal铆as</p>
                    <p><strong>Tablas (2):</strong> alertas_sistema, anomalias_detectadas</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="21_Alertas_Anomalias_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="21_Alertas_Anomalias_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

            <div class="module">
                <div class="module-header">
                    <h2>22_Auditoria</h2>
                    <p>Auditor铆a y trazabilidad</p>
                    <p><strong>Tablas (3):</strong> auditoria_operaciones, auditoria_empleados, auditoria_usuarios_web</p>
                </div>
                <div class="diagrams">
                    <div class="diagram">
                        <h3> DER L贸gico</h3>
                        <img src="22_Auditoria_Logico.png" alt="DER L贸gico" onclick="openModal(this.src)">
                    </div>
                    <div class="diagram">
                        <h3>锔 DER F铆sico</h3>
                        <img src="22_Auditoria_Fisico.png" alt="DER F铆sico" onclick="openModal(this.src)">
                    </div>
                </div>
            </div>

        </div>
        <div class="footer">
            <p><strong>Sistema de Gesti贸n de Cantina Escolar - Cantina Tita</strong></p>
            <p>Diagramas generados autom谩ticamente con Python, SQLAlchemy y Graphviz</p>
            <p>漏 2026</p>
        </div>
    </div>
    
    <div id="imageModal" class="modal" onclick="closeModal()">
        <span class="close">&times;</span>
        <div class="modal-content">
            <img id="modalImage" src="" alt="">
        </div>
    </div>
    
    <script>
        function openModal(src) {
            document.getElementById('imageModal').style.display = 'block';
            document.getElementById('modalImage').src = src;
        }
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') closeModal();
        });
    </script>
</body>
</html>
