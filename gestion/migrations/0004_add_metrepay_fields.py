# Generated by Django 5.2.8 on 2025-12-29 19:38

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('gestion', '0003_fix_auditoria_foreign_keys'),
    ]

    operations = [
        migrations.CreateModel(
            name='Alergeno',
            fields=[
                ('id_alergeno', models.AutoField(db_column='ID_Alergeno', primary_key=True, serialize=False)),
                ('nombre', models.CharField(db_column='Nombre', max_length=100, unique=True)),
                ('descripcion', models.TextField(blank=True, db_column='Descripcion', null=True)),
                ('palabras_clave', models.JSONField(db_column='Palabras_Clave', help_text='Array de palabras clave para b煤squeda (ej: ["man铆", "peanut", "cacahuete"])')),
                ('nivel_severidad', models.CharField(choices=[('CRITICO', 'Cr铆tico'), ('ALTO', 'Alto'), ('MEDIO', 'Medio'), ('BAJO', 'Bajo')], db_column='Nivel_Severidad', default='MEDIO', max_length=10)),
                ('icono', models.CharField(blank=True, db_column='Icono', help_text='Emoji representativo (ej: , , )', max_length=10, null=True)),
                ('activo', models.BooleanField(db_column='Activo', default=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
                ('usuario_creacion', models.CharField(blank=True, db_column='Usuario_Creacion', max_length=100, null=True)),
            ],
            options={
                'verbose_name': 'Al茅rgeno',
                'verbose_name_plural': 'Al茅rgenos',
                'db_table': 'alergenos',
                'ordering': ['nivel_severidad', 'nombre'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='AnomaliaDetectada',
            fields=[
                ('id_anomalia', models.AutoField(db_column='ID_Anomalia', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('tipo_anomalia', models.CharField(choices=[('IP_NUEVA', 'IP Nueva'), ('HORARIO_INUSUAL', 'Horario Inusual'), ('MULTIPLES_SESIONES', 'M煤ltiples Sesiones'), ('UBICACION_SOSPECHOSA', 'Ubicaci贸n Sospechosa')], db_column='Tipo_Anomalia', max_length=30)),
                ('ip_address', models.CharField(blank=True, db_column='IP_Address', max_length=45, null=True)),
                ('fecha_deteccion', models.DateTimeField(db_column='Fecha_Deteccion')),
                ('descripcion', models.TextField(blank=True, db_column='Descripcion', null=True)),
                ('nivel_riesgo', models.CharField(choices=[('BAJO', 'Bajo'), ('MEDIO', 'Medio'), ('ALTO', 'Alto')], db_column='Nivel_Riesgo', default='MEDIO', max_length=10)),
                ('notificado', models.BooleanField(db_column='Notificado', default=False)),
            ],
            options={
                'verbose_name': 'Anomal铆a Detectada',
                'verbose_name_plural': 'Anomal铆as Detectadas',
                'db_table': 'anomalias_detectadas',
                'ordering': ['-fecha_deteccion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='AplicacionPagosCompras',
            fields=[
                ('id_aplicacion', models.BigAutoField(db_column='ID_Aplicacion', primary_key=True, serialize=False)),
                ('monto_aplicado', models.DecimalField(db_column='Monto_Aplicado', decimal_places=2, max_digits=12)),
            ],
            options={
                'verbose_name': 'Aplicaci贸n de Pago a Compra',
                'verbose_name_plural': 'Aplicaciones de Pagos a Compras',
                'db_table': 'aplicacion_pagos_compras',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='AplicacionPagosVentas',
            fields=[
                ('id_aplicacion', models.BigAutoField(db_column='ID_Aplicacion', primary_key=True, serialize=False)),
                ('monto_aplicado', models.BigIntegerField(db_column='Monto_Aplicado')),
            ],
            options={
                'verbose_name': 'Aplicaci贸n de Pago a Venta',
                'verbose_name_plural': 'Aplicaciones de Pagos a Ventas',
                'db_table': 'aplicacion_pagos_ventas',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='AuditoriaOperacion',
            fields=[
                ('id_auditoria', models.AutoField(db_column='ID_Auditoria', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('tipo_usuario', models.CharField(choices=[('EMPLEADO', 'Empleado'), ('CLIENTE_WEB', 'Cliente Web'), ('ADMIN', 'Administrador')], db_column='Tipo_Usuario', max_length=20)),
                ('id_usuario', models.IntegerField(blank=True, db_column='ID_Usuario', null=True)),
                ('operacion', models.CharField(db_column='Operacion', max_length=100)),
                ('tabla_afectada', models.CharField(blank=True, db_column='Tabla_Afectada', max_length=100, null=True)),
                ('id_registro', models.IntegerField(blank=True, db_column='ID_Registro', null=True)),
                ('descripcion', models.TextField(blank=True, db_column='Descripcion', null=True)),
                ('datos_anteriores', models.JSONField(blank=True, db_column='Datos_Anteriores', null=True)),
                ('datos_nuevos', models.JSONField(blank=True, db_column='Datos_Nuevos', null=True)),
                ('ip_address', models.CharField(blank=True, db_column='IP_Address', max_length=45, null=True)),
                ('ciudad', models.CharField(blank=True, db_column='Ciudad', max_length=100, null=True)),
                ('pais', models.CharField(blank=True, db_column='Pais', max_length=100, null=True)),
                ('user_agent', models.TextField(blank=True, db_column='User_Agent', null=True)),
                ('fecha_operacion', models.DateTimeField(db_column='Fecha_Operacion')),
                ('resultado', models.CharField(choices=[('EXITOSO', 'Exitoso'), ('FALLIDO', 'Fallido')], db_column='Resultado', max_length=20)),
                ('mensaje_error', models.TextField(blank=True, db_column='Mensaje_Error', null=True)),
            ],
            options={
                'verbose_name': 'Auditor铆a de Operaci贸n',
                'verbose_name_plural': 'Auditor铆a de Operaciones',
                'db_table': 'auditoria_operaciones',
                'ordering': ['-fecha_operacion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Autenticacion2Fa',
            fields=[
                ('id_2fa', models.AutoField(db_column='ID_2FA', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('tipo_usuario', models.CharField(choices=[('ADMIN', 'Administrador'), ('CAJERO', 'Cajero'), ('CLIENTE_WEB', 'Cliente Web')], db_column='Tipo_Usuario', max_length=20)),
                ('secret_key', models.CharField(db_column='Secret_Key', help_text='Clave secreta TOTP codificada en Base32', max_length=32)),
                ('backup_codes', models.TextField(blank=True, db_column='Backup_Codes', help_text='C贸digos de respaldo JSON (array de strings hasheados)', null=True)),
                ('habilitado', models.BooleanField(db_column='Habilitado', default=False, help_text='Si el usuario tiene 2FA activo')),
                ('fecha_activacion', models.DateTimeField(blank=True, db_column='Fecha_Activacion', help_text='Cuando se activ贸 por primera vez', null=True)),
                ('ultima_verificacion', models.DateTimeField(blank=True, db_column='Ultima_Verificacion', help_text='ltimo uso exitoso del c贸digo', null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
            ],
            options={
                'verbose_name': 'Autenticaci贸n 2FA',
                'verbose_name_plural': 'Autenticaciones 2FA',
                'db_table': 'autenticacion_2fa',
                'ordering': ['-fecha_creacion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='BloqueoCuenta',
            fields=[
                ('id_bloqueo', models.AutoField(db_column='ID_Bloqueo', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('tipo_usuario', models.CharField(choices=[('EMPLEADO', 'Empleado'), ('CLIENTE_WEB', 'Cliente Web')], db_column='Tipo_Usuario', max_length=20)),
                ('motivo', models.CharField(db_column='Motivo', max_length=255)),
                ('fecha_bloqueo', models.DateTimeField(db_column='Fecha_Bloqueo')),
                ('fecha_desbloqueo', models.DateTimeField(blank=True, db_column='Fecha_Desbloqueo', null=True)),
                ('bloqueado_por', models.CharField(blank=True, db_column='Bloqueado_Por', max_length=100, null=True)),
                ('ip_address', models.CharField(blank=True, db_column='IP_Address', max_length=45, null=True)),
                ('activo', models.BooleanField(db_column='Activo', default=True)),
            ],
            options={
                'verbose_name': 'Bloqueo de Cuenta',
                'verbose_name_plural': 'Bloqueos de Cuentas',
                'db_table': 'bloqueos_cuenta',
                'ordering': ['-fecha_bloqueo'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='CategoriaPromocion',
            fields=[
                ('id_categoria_promocion', models.AutoField(db_column='ID_Categoria_Promocion', primary_key=True, serialize=False)),
            ],
            options={
                'verbose_name': 'Categor铆a en Promoci贸n',
                'verbose_name_plural': 'Categor铆as en Promoci贸n',
                'db_table': 'categorias_promocion',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='CuentaAlmuerzoMensual',
            fields=[
                ('id_cuenta', models.BigAutoField(db_column='ID_Cuenta', primary_key=True, serialize=False)),
                ('anio', models.IntegerField(db_column='Anio')),
                ('mes', models.SmallIntegerField(db_column='Mes')),
                ('cantidad_almuerzos', models.IntegerField(db_column='Cantidad_Almuerzos', default=0)),
                ('monto_total', models.DecimalField(db_column='Monto_Total', decimal_places=2, default=0, max_digits=10)),
                ('forma_cobro', models.CharField(choices=[('CONTADO_ANTICIPADO', 'Contado Anticipado'), ('CREDITO_MENSUAL', 'Cr茅dito Mensual')], db_column='Forma_Cobro', max_length=20)),
                ('monto_pagado', models.DecimalField(db_column='Monto_Pagado', decimal_places=2, default=0, max_digits=10)),
                ('estado', models.CharField(choices=[('PENDIENTE', 'Pendiente'), ('PARCIAL', 'Parcial'), ('PAGADO', 'Pagado')], db_column='Estado', default='PENDIENTE', max_length=10)),
                ('fecha_generacion', models.DateField(db_column='Fecha_Generacion')),
                ('fecha_actualizacion', models.DateTimeField(auto_now=True, db_column='Fecha_Actualizacion')),
                ('observaciones', models.TextField(blank=True, db_column='Observaciones', null=True)),
            ],
            options={
                'verbose_name': 'Cuenta Mensual de Almuerzo',
                'verbose_name_plural': 'Cuentas Mensuales de Almuerzo',
                'db_table': 'cuentas_almuerzo_mensual',
                'ordering': ['-anio', '-mes'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='DetalleNotaCreditoProveedor',
            fields=[
                ('id_detalle_nc_proveedor', models.BigAutoField(db_column='ID_Detalle_NC_Proveedor', primary_key=True, serialize=False)),
                ('cantidad', models.DecimalField(db_column='Cantidad', decimal_places=3, max_digits=10)),
                ('precio_unitario', models.DecimalField(db_column='Precio_Unitario', decimal_places=2, max_digits=12)),
                ('subtotal', models.DecimalField(db_column='Subtotal', decimal_places=2, max_digits=12)),
            ],
            options={
                'verbose_name': 'Detalle NC Proveedor',
                'verbose_name_plural': 'Detalles NC Proveedores',
                'db_table': 'detalle_nota_credito_proveedor',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Grado',
            fields=[
                ('id_grado', models.AutoField(db_column='ID_Grado', primary_key=True, serialize=False)),
                ('nombre_grado', models.CharField(db_column='Nombre_Grado', max_length=50, unique=True)),
                ('nivel', models.IntegerField(db_column='Nivel')),
                ('orden_visualizacion', models.IntegerField(db_column='Orden_Visualizacion')),
                ('es_ultimo_grado', models.BooleanField(db_column='Es_Ultimo_Grado', default=False)),
                ('activo', models.BooleanField(db_column='Activo', default=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
            ],
            options={
                'verbose_name': 'Grado',
                'verbose_name_plural': 'Grados',
                'db_table': 'grados',
                'ordering': ['orden_visualizacion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='HistorialGradoHijo',
            fields=[
                ('id_historial', models.AutoField(db_column='ID_Historial', primary_key=True, serialize=False)),
                ('grado_anterior', models.CharField(blank=True, db_column='Grado_Anterior', max_length=50, null=True)),
                ('grado_nuevo', models.CharField(db_column='Grado_Nuevo', max_length=50)),
                ('anio_escolar', models.IntegerField(db_column='Anio_Escolar')),
                ('fecha_cambio', models.DateTimeField(auto_now_add=True, db_column='Fecha_Cambio')),
                ('motivo', models.CharField(choices=[('INGRESO', 'Ingreso'), ('PROMOCION', 'Promoci贸n'), ('CAMBIO_MANUAL', 'Cambio Manual'), ('REINGRESO', 'Reingreso')], db_column='Motivo', default='PROMOCION', max_length=20)),
                ('usuario_registro', models.CharField(blank=True, db_column='Usuario_Registro', max_length=100, null=True)),
                ('observaciones', models.TextField(blank=True, db_column='Observaciones', null=True)),
            ],
            options={
                'verbose_name': 'Historial de Grado',
                'verbose_name_plural': 'Historial de Grados',
                'db_table': 'historial_grados_hijos',
                'ordering': ['-fecha_cambio'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Intento2Fa',
            fields=[
                ('id_intento', models.AutoField(db_column='ID_Intento', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('tipo_usuario', models.CharField(choices=[('ADMIN', 'Administrador'), ('CAJERO', 'Cajero'), ('CLIENTE_WEB', 'Cliente Web')], db_column='Tipo_Usuario', max_length=20)),
                ('ip_address', models.CharField(blank=True, db_column='IP_Address', max_length=45, null=True)),
                ('ciudad', models.CharField(blank=True, db_column='Ciudad', max_length=100, null=True)),
                ('pais', models.CharField(blank=True, db_column='Pais', max_length=100, null=True)),
                ('codigo_ingresado', models.CharField(blank=True, db_column='Codigo_Ingresado', max_length=10, null=True)),
                ('exitoso', models.BooleanField(db_column='Exitoso', default=False)),
                ('tipo_codigo', models.CharField(blank=True, choices=[('TOTP', 'TOTP'), ('BACKUP', 'C贸digo de Respaldo')], db_column='Tipo_Codigo', max_length=10, null=True)),
                ('fecha_intento', models.DateTimeField(auto_now_add=True, db_column='Fecha_Intento')),
            ],
            options={
                'verbose_name': 'Intento 2FA',
                'verbose_name_plural': 'Intentos 2FA',
                'db_table': 'intentos_2fa',
                'ordering': ['-fecha_intento'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='IntentoLogin',
            fields=[
                ('id_intento', models.AutoField(db_column='ID_Intento', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('ip_address', models.CharField(db_column='IP_Address', max_length=45)),
                ('ciudad', models.CharField(blank=True, db_column='Ciudad', max_length=100, null=True)),
                ('pais', models.CharField(blank=True, db_column='Pais', max_length=100, null=True)),
                ('fecha_intento', models.DateTimeField(db_column='Fecha_Intento')),
                ('exitoso', models.BooleanField(db_column='Exitoso', default=False)),
                ('motivo_fallo', models.CharField(blank=True, db_column='Motivo_Fallo', max_length=100, null=True)),
            ],
            options={
                'verbose_name': 'Intento de Login',
                'verbose_name_plural': 'Intentos de Login',
                'db_table': 'intentos_login',
                'ordering': ['-fecha_intento'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='LogAutorizacion',
            fields=[
                ('id_log', models.BigAutoField(db_column='ID_Log', primary_key=True, serialize=False)),
                ('codigo_barra', models.CharField(db_column='Codigo_Barra', max_length=50)),
                ('tipo_operacion', models.CharField(choices=[('ANULAR_ALMUERZO', 'Anular Almuerzo'), ('ANULAR_VENTA', 'Anular Venta'), ('ANULAR_RECARGA', 'Anular Recarga'), ('MODIFICAR_PRECIO', 'Modificar Precio'), ('OTRO', 'Otro')], db_column='Tipo_Operacion', max_length=20)),
                ('id_registro_afectado', models.BigIntegerField(blank=True, db_column='ID_Registro_Afectado', null=True)),
                ('descripcion', models.TextField(blank=True, db_column='Descripcion', null=True)),
                ('id_usuario', models.IntegerField(blank=True, db_column='ID_Usuario', null=True)),
                ('fecha_hora', models.DateTimeField(auto_now_add=True, db_column='Fecha_Hora')),
                ('ip_origen', models.CharField(blank=True, db_column='IP_Origen', max_length=45, null=True)),
                ('resultado', models.CharField(choices=[('EXITOSO', 'Exitoso'), ('RECHAZADO', 'Rechazado'), ('ERROR', 'Error')], db_column='Resultado', default='EXITOSO', max_length=15)),
            ],
            options={
                'verbose_name': 'Log de Autorizaci贸n',
                'verbose_name_plural': 'Logs de Autorizaciones',
                'db_table': 'log_autorizaciones',
                'ordering': ['-fecha_hora'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='NotasCreditoCliente',
            fields=[
                ('id_nota', models.BigAutoField(db_column='ID_Nota', primary_key=True, serialize=False)),
                ('nro_factura_venta', models.BigIntegerField(db_column='Nro_Factura_Venta')),
                ('fecha', models.DateTimeField(db_column='Fecha')),
                ('monto_total', models.DecimalField(db_column='Monto_Total', decimal_places=2, max_digits=12)),
                ('observacion', models.CharField(blank=True, db_column='Observacion', max_length=255, null=True)),
                ('estado', models.CharField(blank=True, choices=[('Emitida', 'Emitida'), ('Aplicada', 'Aplicada'), ('Anulada', 'Anulada')], db_column='Estado', max_length=8, null=True)),
            ],
            options={
                'verbose_name': 'Nota de Cr茅dito Cliente',
                'verbose_name_plural': 'Notas de Cr茅dito Cliente',
                'db_table': 'notas_credito_cliente',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='NotasCreditoProveedor',
            fields=[
                ('id_nota_proveedor', models.BigAutoField(db_column='ID_Nota_Proveedor', primary_key=True, serialize=False)),
                ('nro_factura_compra', models.BigIntegerField(blank=True, db_column='Nro_Factura_Compra', null=True)),
                ('fecha', models.DateTimeField(db_column='Fecha')),
                ('monto_total', models.DecimalField(db_column='Monto_Total', decimal_places=2, max_digits=12)),
                ('observacion', models.CharField(blank=True, db_column='Observacion', max_length=255, null=True)),
                ('estado', models.CharField(choices=[('EMITIDA', 'Emitida'), ('APLICADA', 'Aplicada'), ('ANULADA', 'Anulada')], db_column='Estado', default='EMITIDA', max_length=10)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
            ],
            options={
                'verbose_name': 'Nota de Cr茅dito Proveedor',
                'verbose_name_plural': 'Notas de Cr茅dito Proveedores',
                'db_table': 'notas_credito_proveedor',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='PagoCuentaAlmuerzo',
            fields=[
                ('id_pago', models.BigAutoField(db_column='ID_Pago', primary_key=True, serialize=False)),
                ('fecha_pago', models.DateTimeField(auto_now_add=True, db_column='Fecha_Pago')),
                ('medio_pago', models.CharField(choices=[('EFECTIVO', 'Efectivo'), ('DEBITO', 'D茅bito'), ('CREDITO', 'Cr茅dito'), ('TRANSFERENCIA', 'Transferencia'), ('OTRO', 'Otro')], db_column='Medio_Pago', max_length=15)),
                ('monto', models.DecimalField(db_column='Monto', decimal_places=2, max_digits=10)),
                ('referencia', models.CharField(blank=True, db_column='Referencia', max_length=50, null=True)),
                ('observaciones', models.TextField(blank=True, db_column='Observaciones', null=True)),
            ],
            options={
                'verbose_name': 'Pago de Cuenta de Almuerzo',
                'verbose_name_plural': 'Pagos de Cuentas de Almuerzo',
                'db_table': 'pagos_cuentas_almuerzo',
                'ordering': ['-fecha_pago'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='PagosProveedores',
            fields=[
                ('id_pago_proveedor', models.BigAutoField(db_column='ID_Pago_Proveedor', primary_key=True, serialize=False)),
                ('monto_aplicado', models.DecimalField(db_column='Monto_Aplicado', decimal_places=2, max_digits=12)),
                ('fecha_pago', models.DateTimeField(db_column='Fecha_Pago')),
                ('referencia_transaccion', models.CharField(blank=True, db_column='Referencia_Transaccion', max_length=100, null=True)),
                ('estado', models.CharField(choices=[('PROCESADO', 'Procesado'), ('ANULADO', 'Anulado')], db_column='Estado', default='PROCESADO', max_length=10)),
                ('observaciones', models.TextField(blank=True, db_column='Observaciones', null=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
            ],
            options={
                'verbose_name': 'Pago a Proveedor',
                'verbose_name_plural': 'Pagos a Proveedores',
                'db_table': 'pagos_proveedores',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='PatronAcceso',
            fields=[
                ('id_patron', models.AutoField(db_column='ID_Patron', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('tipo_usuario', models.CharField(choices=[('EMPLEADO', 'Empleado'), ('CLIENTE_WEB', 'Cliente Web'), ('ADMIN', 'Administrador')], db_column='Tipo_Usuario', max_length=20)),
                ('ip_address', models.CharField(db_column='IP_Address', max_length=45)),
                ('horario_inicio', models.TimeField(blank=True, db_column='Horario_Inicio', null=True)),
                ('horario_fin', models.TimeField(blank=True, db_column='Horario_Fin', null=True)),
                ('dias_semana', models.CharField(blank=True, db_column='Dias_Semana', max_length=50, null=True)),
                ('primera_deteccion', models.DateTimeField(db_column='Primera_Deteccion')),
                ('ultima_deteccion', models.DateTimeField(db_column='Ultima_Deteccion')),
                ('frecuencia_accesos', models.IntegerField(db_column='Frecuencia_Accesos', default=1)),
                ('es_habitual', models.BooleanField(db_column='Es_Habitual', default=False)),
            ],
            options={
                'verbose_name': 'Patr贸n de Acceso',
                'verbose_name_plural': 'Patrones de Acceso',
                'db_table': 'patrones_acceso',
                'ordering': ['-ultima_deteccion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ProductoAlergeno',
            fields=[
                ('id_producto_alergeno', models.AutoField(db_column='ID_Producto_Alergeno', primary_key=True, serialize=False)),
                ('contiene', models.BooleanField(db_column='Contiene', default=True, help_text='True: Contiene el al茅rgeno. False: Puede contener trazas')),
                ('observaciones', models.TextField(blank=True, db_column='Observaciones', null=True)),
                ('fecha_registro', models.DateTimeField(auto_now_add=True, db_column='Fecha_Registro')),
                ('usuario_registro', models.CharField(blank=True, db_column='Usuario_Registro', max_length=100, null=True)),
            ],
            options={
                'verbose_name': 'Producto-Al茅rgeno',
                'verbose_name_plural': 'Productos-Al茅rgenos',
                'db_table': 'producto_alergenos',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='ProductoPromocion',
            fields=[
                ('id_producto_promocion', models.AutoField(db_column='ID_Producto_Promocion', primary_key=True, serialize=False)),
            ],
            options={
                'verbose_name': 'Producto en Promoci贸n',
                'verbose_name_plural': 'Productos en Promoci贸n',
                'db_table': 'productos_promocion',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='Promocion',
            fields=[
                ('id_promocion', models.AutoField(db_column='ID_Promocion', primary_key=True, serialize=False)),
                ('nombre', models.CharField(db_column='Nombre', max_length=200)),
                ('descripcion', models.TextField(blank=True, db_column='Descripcion', null=True)),
                ('tipo_promocion', models.CharField(choices=[('DESCUENTO_PORCENTAJE', 'Descuento Porcentaje'), ('DESCUENTO_MONTO', 'Descuento Monto Fijo'), ('PRECIO_FIJO', 'Precio Fijo'), ('NXM', 'N x M (ej: 2x1, 3x2)'), ('COMBO', 'Combo de Productos')], db_column='Tipo_Promocion', max_length=25)),
                ('valor_descuento', models.DecimalField(db_column='Valor_Descuento', decimal_places=2, help_text='Porcentaje (10.00 = 10%) o monto fijo (5000 = Gs. 5000)', max_digits=10)),
                ('fecha_inicio', models.DateField(db_column='Fecha_Inicio')),
                ('fecha_fin', models.DateField(blank=True, db_column='Fecha_Fin', null=True)),
                ('hora_inicio', models.TimeField(blank=True, db_column='Hora_Inicio', null=True)),
                ('hora_fin', models.TimeField(blank=True, db_column='Hora_Fin', null=True)),
                ('dias_semana', models.JSONField(blank=True, db_column='Dias_Semana', help_text='Array de d铆as [1=Lun, 2=Mar, 3=Mie, 4=Jue, 5=Vie, 6=Sab, 7=Dom]', null=True)),
                ('aplica_a', models.CharField(choices=[('PRODUCTO', 'Producto Espec铆fico'), ('CATEGORIA', 'Categor铆a'), ('TOTAL_VENTA', 'Total de Venta'), ('ESTUDIANTE_GRADO', 'Grado de Estudiante')], db_column='Aplica_A', max_length=20)),
                ('min_cantidad', models.IntegerField(db_column='Min_Cantidad', default=1, help_text='Cantidad m铆nima de productos para aplicar')),
                ('monto_minimo', models.DecimalField(db_column='Monto_Minimo', decimal_places=2, default=0, help_text='Monto m铆nimo de compra para aplicar', max_digits=10)),
                ('max_usos_cliente', models.IntegerField(blank=True, db_column='Max_Usos_Cliente', help_text='M谩ximo de usos por cliente/estudiante', null=True)),
                ('max_usos_total', models.IntegerField(blank=True, db_column='Max_Usos_Total', help_text='M谩ximo de usos totales', null=True)),
                ('usos_actuales', models.IntegerField(db_column='Usos_Actuales', default=0)),
                ('requiere_codigo', models.BooleanField(db_column='Requiere_Codigo', default=False)),
                ('codigo_promocion', models.CharField(blank=True, db_column='Codigo_Promocion', max_length=50, null=True, unique=True)),
                ('prioridad', models.IntegerField(db_column='Prioridad', default=1, help_text='Orden de aplicaci贸n (1=Mayor prioridad)')),
                ('activo', models.BooleanField(db_column='Activo', default=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
                ('usuario_creacion', models.CharField(blank=True, db_column='Usuario_Creacion', max_length=100, null=True)),
            ],
            options={
                'verbose_name': 'Promoci贸n',
                'verbose_name_plural': 'Promociones',
                'db_table': 'promociones',
                'ordering': ['prioridad', '-fecha_inicio'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='PromocionAplicada',
            fields=[
                ('id_aplicacion', models.AutoField(db_column='ID_Aplicacion', primary_key=True, serialize=False)),
                ('monto_descontado', models.DecimalField(db_column='Monto_Descontado', decimal_places=2, max_digits=10)),
                ('fecha_aplicacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Aplicacion')),
            ],
            options={
                'verbose_name': 'Promoci贸n Aplicada',
                'verbose_name_plural': 'Promociones Aplicadas',
                'db_table': 'promociones_aplicadas',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='RenovacionSesion',
            fields=[
                ('id_renovacion', models.AutoField(db_column='ID_Renovacion', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('session_key_anterior', models.CharField(blank=True, db_column='Session_Key_Anterior', max_length=255, null=True)),
                ('session_key_nuevo', models.CharField(blank=True, db_column='Session_Key_Nuevo', max_length=255, null=True)),
                ('ip_address', models.CharField(blank=True, db_column='IP_Address', max_length=45, null=True)),
                ('user_agent', models.TextField(blank=True, db_column='User_Agent', null=True)),
                ('fecha_renovacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Renovacion')),
            ],
            options={
                'verbose_name': 'Renovaci贸n de Sesi贸n',
                'verbose_name_plural': 'Renovaciones de Sesi贸n',
                'db_table': 'renovaciones_sesion',
                'ordering': ['-fecha_renovacion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='RestriccionHoraria',
            fields=[
                ('id_restriccion', models.AutoField(db_column='ID_Restriccion', primary_key=True, serialize=False)),
                ('usuario', models.CharField(blank=True, db_column='Usuario', help_text='Usuario espec铆fico (NULL = aplica a tipo_usuario)', max_length=100, null=True)),
                ('tipo_usuario', models.CharField(choices=[('ADMIN', 'Administrador'), ('CAJERO', 'Cajero'), ('CLIENTE_WEB', 'Cliente Web')], db_column='Tipo_Usuario', max_length=20)),
                ('dia_semana', models.CharField(choices=[('LUNES', 'Lunes'), ('MARTES', 'Martes'), ('MIERCOLES', 'Mi茅rcoles'), ('JUEVES', 'Jueves'), ('VIERNES', 'Viernes'), ('SABADO', 'S谩bado'), ('DOMINGO', 'Domingo')], db_column='Dia_Semana', max_length=20)),
                ('hora_inicio', models.TimeField(db_column='Hora_Inicio', help_text='Hora de inicio permitida')),
                ('hora_fin', models.TimeField(db_column='Hora_Fin', help_text='Hora de fin permitida')),
                ('activo', models.BooleanField(db_column='Activo', default=True, help_text='Si la restricci贸n est谩 activa')),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
            ],
            options={
                'verbose_name': 'Restricci贸n Horaria',
                'verbose_name_plural': 'Restricciones Horarias',
                'db_table': 'restricciones_horarias',
                'ordering': ['dia_semana', 'hora_inicio'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='SesionActiva',
            fields=[
                ('id_sesion', models.AutoField(db_column='ID_Sesion', primary_key=True, serialize=False)),
                ('usuario', models.CharField(db_column='Usuario', max_length=100)),
                ('tipo_usuario', models.CharField(choices=[('EMPLEADO', 'Empleado'), ('CLIENTE_WEB', 'Cliente Web'), ('ADMIN', 'Administrador')], db_column='Tipo_Usuario', max_length=20)),
                ('session_key', models.CharField(db_column='Session_Key', max_length=255, unique=True)),
                ('ip_address', models.CharField(blank=True, db_column='IP_Address', max_length=45, null=True)),
                ('user_agent', models.TextField(blank=True, db_column='User_Agent', null=True)),
                ('fecha_inicio', models.DateTimeField(db_column='Fecha_Inicio')),
                ('ultima_actividad', models.DateTimeField(db_column='Ultima_Actividad')),
                ('activa', models.BooleanField(db_column='Activa', default=True)),
            ],
            options={
                'verbose_name': 'Sesi贸n Activa',
                'verbose_name_plural': 'Sesiones Activas',
                'db_table': 'sesiones_activas',
                'ordering': ['-ultima_actividad'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TarjetaAutorizacion',
            fields=[
                ('id_tarjeta_autorizacion', models.AutoField(db_column='ID_Tarjeta_Autorizacion', primary_key=True, serialize=False)),
                ('codigo_barra', models.CharField(db_column='Codigo_Barra', max_length=50, unique=True)),
                ('tipo_autorizacion', models.CharField(choices=[('ADMIN', 'Administrador'), ('SUPERVISOR', 'Supervisor'), ('CAJERO', 'Cajero')], db_column='Tipo_Autorizacion', default='ADMIN', max_length=15)),
                ('puede_anular_almuerzos', models.BooleanField(db_column='Puede_Anular_Almuerzos', default=True)),
                ('puede_anular_ventas', models.BooleanField(db_column='Puede_Anular_Ventas', default=True)),
                ('puede_anular_recargas', models.BooleanField(db_column='Puede_Anular_Recargas', default=True)),
                ('puede_modificar_precios', models.BooleanField(db_column='Puede_Modificar_Precios', default=False)),
                ('activo', models.BooleanField(db_column='Activo', default=True)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
                ('fecha_vencimiento', models.DateField(blank=True, db_column='Fecha_Vencimiento', null=True)),
                ('observaciones', models.TextField(blank=True, db_column='Observaciones', null=True)),
            ],
            options={
                'verbose_name': 'Tarjeta de Autorizaci贸n',
                'verbose_name_plural': 'Tarjetas de Autorizaci贸n',
                'db_table': 'tarjetas_autorizacion',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TipoAlmuerzo',
            fields=[
                ('id_tipo_almuerzo', models.AutoField(db_column='ID_Tipo_Almuerzo', primary_key=True, serialize=False)),
                ('nombre', models.CharField(db_column='Nombre', max_length=100)),
                ('descripcion', models.TextField(blank=True, db_column='Descripcion', null=True)),
                ('precio_unitario', models.DecimalField(db_column='Precio_Unitario', decimal_places=2, max_digits=10)),
                ('incluye_plato_principal', models.BooleanField(db_column='Incluye_Plato_Principal', default=True)),
                ('incluye_postre', models.BooleanField(db_column='Incluye_Postre', default=False)),
                ('incluye_bebida', models.BooleanField(db_column='Incluye_Bebida', default=False)),
                ('fecha_creacion', models.DateTimeField(auto_now_add=True, db_column='Fecha_Creacion')),
                ('activo', models.BooleanField(db_column='Activo', default=True)),
            ],
            options={
                'verbose_name': 'Tipo de Almuerzo',
                'verbose_name_plural': 'Tipos de Almuerzo',
                'db_table': 'tipos_almuerzo',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='TokenRecuperacion',
            fields=[
                ('id_token', models.AutoField(db_column='ID_Token', primary_key=True, serialize=False)),
                ('token', models.CharField(db_column='Token', max_length=64, unique=True)),
                ('fecha_creacion', models.DateTimeField(db_column='Fecha_Creacion')),
                ('fecha_expiracion', models.DateTimeField(db_column='Fecha_Expiracion')),
                ('usado', models.BooleanField(db_column='Usado', default=False)),
                ('fecha_uso', models.DateTimeField(blank=True, db_column='Fecha_Uso', null=True)),
                ('ip_solicitud', models.CharField(blank=True, db_column='IP_Solicitud', max_length=45, null=True)),
            ],
            options={
                'verbose_name': 'Token de Recuperaci贸n',
                'verbose_name_plural': 'Tokens de Recuperaci贸n',
                'db_table': 'tokens_recuperacion',
                'ordering': ['-fecha_creacion'],
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VistaAlmuerzosDiarios',
            fields=[
                ('id_registro_consumo', models.BigIntegerField(db_column='ID_Registro_Consumo', primary_key=True, serialize=False)),
                ('fecha_consumo', models.DateField(db_column='Fecha_Consumo')),
                ('hora_registro', models.TimeField(db_column='Hora_Registro')),
                ('id_hijo', models.IntegerField(db_column='ID_Hijo')),
                ('estudiante', models.CharField(db_column='Estudiante', max_length=202)),
                ('responsable_nombre', models.CharField(db_column='Responsable_Nombre', max_length=100)),
                ('responsable_apellido', models.CharField(db_column='Responsable_Apellido', max_length=100)),
                ('nro_tarjeta', models.CharField(blank=True, db_column='Nro_Tarjeta', max_length=20, null=True)),
                ('tipo_almuerzo', models.CharField(blank=True, db_column='Tipo_Almuerzo', max_length=100, null=True)),
                ('descripcion_almuerzo', models.TextField(blank=True, db_column='Descripcion_Almuerzo', null=True)),
                ('costo_almuerzo', models.DecimalField(blank=True, db_column='Costo_Almuerzo', decimal_places=2, max_digits=10, null=True)),
                ('marcado_en_cuenta', models.BooleanField(db_column='Marcado_En_Cuenta')),
                ('origen', models.CharField(db_column='Origen', max_length=11)),
                ('id_suscripcion', models.BigIntegerField(blank=True, db_column='ID_Suscripcion', null=True)),
            ],
            options={
                'verbose_name': 'Vista: Almuerzos Diarios',
                'verbose_name_plural': 'Vista: Almuerzos Diarios',
                'db_table': 'v_almuerzos_diarios',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VistaCuentasAlmuerzoDetallado',
            fields=[
                ('id_cuenta', models.BigIntegerField(db_column='ID_Cuenta', primary_key=True, serialize=False)),
                ('id_hijo', models.IntegerField(db_column='ID_Hijo')),
                ('estudiante', models.CharField(db_column='Estudiante', max_length=202)),
                ('responsable_nombre', models.CharField(db_column='Responsable_Nombre', max_length=100)),
                ('responsable_apellido', models.CharField(db_column='Responsable_Apellido', max_length=100)),
                ('responsable_telefono', models.CharField(blank=True, db_column='Responsable_Telefono', max_length=20, null=True)),
                ('anio', models.IntegerField(db_column='Anio')),
                ('mes', models.SmallIntegerField(db_column='Mes')),
                ('cantidad_almuerzos', models.IntegerField(db_column='Cantidad_Almuerzos')),
                ('monto_total', models.DecimalField(db_column='Monto_Total', decimal_places=2, max_digits=10)),
                ('forma_cobro', models.CharField(db_column='Forma_Cobro', max_length=20)),
                ('monto_pagado', models.DecimalField(db_column='Monto_Pagado', decimal_places=2, max_digits=10)),
                ('saldo_pendiente', models.DecimalField(db_column='Saldo_Pendiente', decimal_places=2, max_digits=11)),
                ('estado', models.CharField(db_column='Estado', max_length=10)),
                ('fecha_generacion', models.DateField(db_column='Fecha_Generacion')),
                ('fecha_actualizacion', models.DateTimeField(db_column='Fecha_Actualizacion')),
                ('cantidad_pagos', models.BigIntegerField(db_column='Cantidad_Pagos')),
            ],
            options={
                'verbose_name': 'Vista: Cuentas de Almuerzo Detallado',
                'verbose_name_plural': 'Vista: Cuentas de Almuerzo Detallado',
                'db_table': 'v_cuentas_almuerzo_detallado',
                'managed': False,
            },
        ),
        migrations.CreateModel(
            name='VistaReporteMensualSeparado',
            fields=[
                ('id_hijo', models.IntegerField(db_column='ID_Hijo', primary_key=True, serialize=False)),
                ('estudiante', models.CharField(db_column='Estudiante', max_length=202)),
                ('nro_tarjeta', models.CharField(blank=True, db_column='Nro_Tarjeta', max_length=20, null=True)),
                ('saldo_tarjeta_actual', models.BigIntegerField(blank=True, db_column='Saldo_Tarjeta_Actual', null=True)),
                ('almuerzos_mes_actual', models.DecimalField(db_column='Almuerzos_Mes_Actual', decimal_places=0, max_digits=23)),
                ('total_almuerzos_mes', models.DecimalField(db_column='Total_Almuerzos_Mes', decimal_places=2, max_digits=32)),
                ('consumos_tarjeta_mes', models.DecimalField(db_column='Consumos_Tarjeta_Mes', decimal_places=2, max_digits=32)),
                ('cargas_tarjeta_mes', models.DecimalField(db_column='Cargas_Tarjeta_Mes', decimal_places=2, max_digits=32)),
            ],
            options={
                'verbose_name': 'Vista: Reporte Mensual Separado',
                'verbose_name_plural': 'Vista: Reportes Mensuales Separados',
                'db_table': 'v_reporte_mensual_separado',
                'managed': False,
            },
        ),
        migrations.RemoveField(
            model_name='compraproveedor',
            name='proveedor',
        ),
        migrations.RemoveField(
            model_name='compraproveedor',
            name='usuario',
        ),
        migrations.RemoveField(
            model_name='venta',
            name='cliente',
        ),
        migrations.RemoveField(
            model_name='venta',
            name='usuario',
        ),
        migrations.DeleteModel(
            name='CategoriaDB',
        ),
        migrations.DeleteModel(
            name='ClienteExistente',
        ),
        migrations.DeleteModel(
            name='CtaCorriente',
        ),
        migrations.DeleteModel(
            name='CtaCorrienteProv',
        ),
        migrations.DeleteModel(
            name='NotasCredito',
        ),
        migrations.DeleteModel(
            name='ProductoExistente',
        ),
        migrations.DeleteModel(
            name='ProveedorDB',
        ),
        migrations.AlterModelOptions(
            name='registroconsumoalmuerzo',
            options={'managed': False, 'ordering': ['-fecha_consumo', '-hora_registro'], 'verbose_name': 'Registro de Almuerzo', 'verbose_name_plural': 'Registros de Almuerzos'},
        ),
        migrations.AlterModelTable(
            name='categoria',
            table='categorias',
        ),
        migrations.AlterModelTable(
            name='cliente',
            table='clientes',
        ),
        migrations.AlterModelTable(
            name='detallecompra',
            table='detalle_compra',
        ),
        migrations.AlterModelTable(
            name='detalleventa',
            table='detalle_venta',
        ),
        migrations.AlterModelTable(
            name='producto',
            table='productos',
        ),
        migrations.AlterModelTable(
            name='proveedor',
            table='proveedores',
        ),
        migrations.DeleteModel(
            name='CompraProveedor',
        ),
        migrations.DeleteModel(
            name='Venta',
        ),
    ]
