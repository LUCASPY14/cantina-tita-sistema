{% extends 'gestion/base.html' %}
{% load paraguay_filters %}

{% block title %}Dashboard - Sistema de GestiÃ³n{% endblock %}

{% block content %}
<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
    <h2 style="color: #667eea; margin: 0;">ğŸ“Š Dashboard</h2>
    {% if cache_activo %}
    <div style="background: #d4edda; color: #155724; padding: 8px 16px; border-radius: 6px; font-size: 0.9em; border: 1px solid #c3e6cb;">
        âš¡ Cache activo - Datos optimizados
        {% if ultima_actualizacion %}
        <br><small>Actualizado: {{ ultima_actualizacion|date:"H:i:s" }}</small>
        {% endif %}
    </div>
    {% endif %}
</div>

<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 10px; color: white; text-align: center;">
        <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ“¦</div>
        <h3 style="font-size: 2em; margin-bottom: 5px;">{{ total_productos }}</h3>
        <p>Productos Activos</p>
    </div>
    
    <div style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); padding: 25px; border-radius: 10px; color: white; text-align: center;">
        <div style="font-size: 2.5em; margin-bottom: 10px;">âš ï¸</div>
        <h3 style="font-size: 2em; margin-bottom: 5px;">{{ productos_bajo_stock }}</h3>
        <p>Stock Bajo</p>
    </div>
    
    <div style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); padding: 25px; border-radius: 10px; color: white; text-align: center;">
        <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ‘¥</div>
        <h3 style="font-size: 2em; margin-bottom: 5px;">{{ total_clientes }}</h3>
        <p>Clientes Activos</p>
    </div>
    
    <div style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); padding: 25px; border-radius: 10px; color: white; text-align: center;">
        <div style="font-size: 2.5em; margin-bottom: 10px;">ğŸ’°</div>
        <h3 style="font-size: 2em; margin-bottom: 5px;">{{ cantidad_ventas_hoy }}</h3>
        <p>Ventas Hoy</p>
    </div>
</div>

<div style="background: #f8f9fa; padding: 30px; border-radius: 10px; border-left: 4px solid #667eea;">
    <h3 style="color: #667eea; margin-bottom: 15px;">ğŸ’µ Ventas del DÃ­a</h3>
    <p style="font-size: 2em; color: #43e97b; font-weight: bold;">{{ total_ventas_hoy|guaranies }}</p>
    <p style="color: #666;">Total de ventas completadas hoy</p>
</div>

{% if total_consumos_hoy %}
<div style="margin-top: 20px; background: #e7f3ff; padding: 30px; border-radius: 10px; border-left: 4px solid #4facfe;">
    <h3 style="color: #0066cc; margin-bottom: 15px;">ğŸ½ï¸ Consumos del DÃ­a</h3>
    <p style="font-size: 2em; color: #0066cc; font-weight: bold;">{{ total_consumos_hoy|guaranies }}</p>
    <p style="color: #666;">{{ cantidad_consumos_hoy }} consumo(s) registrado(s) hoy</p>
</div>
{% endif %}

{% if productos_bajo_stock > 0 %}
<div style="margin-top: 20px; background: #fff3cd; padding: 20px; border-radius: 10px; border-left: 4px solid #ffc107;">
    <h4 style="color: #856404; margin-bottom: 10px;">âš ï¸ Alerta de Stock</h4>
    <p style="color: #856404;">Hay {{ productos_bajo_stock }} producto(s) con stock bajo que necesitan reposiciÃ³n.</p>
    <a href="/admin/gestion/producto/?stock__lte=stock_minimo" style="color: #856404; font-weight: bold;">Ver productos â†’</a>
</div>
{% endif %}
{% endblock %}
